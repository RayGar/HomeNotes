/* This is a work is a work in progress. What it is, is our AWS Lambda script, written in javascript and using the alexa skillskit API - Ray*/


"use strict";

var Alexa = require("alexa-sdk");																	// this calls the API, Alexa Skills Kit

var handlers = {																					// this is an object that handles the intent requests
  "LaunchRequest": function () {																	// inside the handlers object, we have function definitions
    
	this.attributes['currentAction'] = "";															// session attributes are persistent variable that describe the state
	this.attributes['noteListLength'] = 0;															// of an execution they must be initiated in this intent
	
	this.response.speak("Welcome to home notes. What action do you wish to take.") 					// API object method that can use the Echo's speakers to say the argument
		.listen("Sorry I did not hear that. Please repeat the action you wish to take");			// repeat if needed
	
	this.emit(':responseReady');																	// this one too
  },
  "ActionIntent": function () {																	 	// this intent executes after LaunchRequest, it handles the actions
	var userAction = this.event.request.intent.slots.action.value;									// save the user action from the JSON slot
	this.attributes['currentAction'] = userAction;													// save it in its session variable too
	this.response.speak("I will now initiate the action " + userAction	+ " with you.");			// output the action so that the user knows he got the right action
	  
    this.emit(':responseReady');
  }
};

exports.handler = function(event, context, callback){												//every lambda function needs this, not just Alexa, AWS calls it everytime someone uses our skill
  var alexa = Alexa.handler(event, context);														//setup the Alexa object
    alexa.registerHandlers(handlers);																//register the handlers we wrote in the preceding block
    alexa.execute();																				//calls the Alexa code
};

